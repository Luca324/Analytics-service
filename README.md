# Analytics-service

## Инструкция по запуску

### Запуск бэкенда
1. Скачать [бэкенд](https://github.com/etozhenerk/shri2025-back)
2. перейти в папку бэкенда и запустить его:
```bash
npm run start
```

### Запуск фронтенда
#### Запуск в режиме разработки
```bash
npm install   # установка зависимостей
npm run dev   # запуск сервера 
```
сервер появится здесь http://localhost:5173/
#### Запуск в продакшен
```bash
npm install   # установка зависимостей
npm run build
npm run preview   # запуск сервера 
```
сервис появится здесь http://localhost:4173/

## Архитектура проекта

### Компоненты
- Страницы: `/pages` (основные страницы приложения)
- UI-компоненты: `/components/UI` (переиспользуемые компоненты: кнопки, ссылки и т.д.)
- Остальные компоненты: `/components`

### Слои приложения
1. **API слой**: `API.js` - взаимодействие с бэкендом
2. **Слой данных**: `store/index.js` - управление состоянием через Zustand
3. **UI слой**: напрямую взаимодействует с API и хранилищем

### Особенности
- Все хранилища Zustand находятся в одном файле из-за их небольшого размера
- Отсутствует отдельный слой бизнес-логики ввиду простоты сервиса
# Тестирование приложения

## Описание тестовых сценариев

### Компонент Generator
1. **Рендеринг кнопки в начальном состоянии**  
   Проверяет, что кнопка генерации отображается корректно при первоначальном рендеринге.

2. **Блокировка кнопки при клике и отображение загрузки**  
   Проверяет, что кнопка блокируется и отображается сообщение о процессе генерации после клика.

3. **Успешная генерация и скачивание файла**  
   Проверяет, что после успешной генерации выводится сообщение и вызывается функция скачивания файла.

4. **Обработка ошибки генерации**  
   Проверяет, что при ошибке генерации отображается соответствующее сообщение.

### Компонент Uploader
1. **Рендеринг интерфейса в начальном состоянии**  
   Проверяет, что кнопка отправки заблокирована и отображается сообщение о необходимости загрузить файл.

2. **Обновление интерфейса при загрузке файла**  
   Проверяет, что после загрузки файла кнопка отправки становится активной и отображается имя файла.

3. **Отображение загрузки при отправке файла**  
   Проверяет, что после отправки файла кнопка исчезает и отображается индикатор загрузки.

4. **Отображение процесса обработки обработки**  
   Проверяет, что после начала обработки файла отображается статистика в процессе поступления данных.

### Компонент History
1. **Отображение элементов истории**  
   Проверяет, что все элементы истории отображаются корректно.

2. **Отображение кнопок управления**  
   Проверяет, что кнопки "Сгенерировать больше" и "Очистить всё" отображаются.

3. **Удаление элемента истории**  
   Проверяет, что при клике на кнопку удаления вызывается соответствующая функция.

4. **Очистка истории**  
   Проверяет, что при клике на кнопку "Очистить всё" вызывается функция очистки истории.

### Тестирование навигации (Navbar)

Файл `navbartest.spec.js` содержит тесты для проверки корректности работы навигации между страницами приложения с использованием `Navbar`.

#### Описание тестовых сценариев

1. **Рендеринг страницы Uploader по умолчанию**  
   Проверяет, что при загрузке приложения отображается страница `Uploader`, а другие страницы (`Generator` и `History`) не рендерятся.

2. **Переход на страницу Generator**  
   Проверяет, что при клике на кнопку "CSV Генератор" в `Navbar` корректно рендерится страница `Generator`, а остальные страницы скрываются.

3. **Переход на страницу History**  
   Проверяет, что при клике на кнопку "История" в `Navbar` корректно рендерится страница `History`, а остальные страницы скрываются.

4. **Возврат на страницу Uploader**  
   Проверяет, что при клике на кнопку "CSV Аналитик" в `Navbar` корректно рендерится страница `Uploader`, даже если текущая страница — `Generator`.

## Инструкции по запуску

1. **Запуск тестов**  
   Для запуска тестов выполните команду:
   ```bash
   npm tun test
   ```

2. **Генерация отчета о покрытии**  
   Для генерации отчета о покрытии выполните команду:
   ```bash
   npm run coverage
   ```

## Используемые технологии

- **Vitest**: Фреймворк для тестирования JavaScript и TypeScript.
- **Testing Library**: Библиотека для тестирования React-компонентов.
- **React Router**: Для тестирования навигации в приложении.
- **Mocking**: Использование `vi.mock` для мокирования модулей и функций.
- **User Event**: Для симуляции пользовательских событий.
